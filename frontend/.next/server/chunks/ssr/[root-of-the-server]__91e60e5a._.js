module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},60350,a=>{"use strict";var b,c=a.i(87924),d=a.i(72131),e=a.i(50944),f=a.i(36545),g=a.i(62477);let h=async a=>(await g.apiClient.get("/todos",{params:a?{status:a}:{}})).data,i=async a=>(await g.apiClient.post("/todos",a)).data,j=async(a,b)=>(await g.apiClient.put(`/todos/${a}`,b)).data,k=async a=>{await g.apiClient.delete(`/todos/${a}`)};var l=((b={}).PENDING="PENDING",b.IN_PROGRESS="IN_PROGRESS",b.DONE="DONE",b);function m({onSubmit:a}){let[b,e]=(0,d.useState)(""),[f,g]=(0,d.useState)(""),[h,i]=(0,d.useState)(!1),j=async c=>{if(c.preventDefault(),b.trim()){i(!0);try{await a({title:b.trim(),description:f.trim()||void 0}),e(""),g("")}catch(a){console.error("Error creating todo:",a)}finally{i(!1)}}};return(0,c.jsxs)("form",{onSubmit:j,className:"bg-white p-4 rounded-lg shadow-md mb-6",children:[(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),(0,c.jsx)("input",{type:"text",id:"title",value:b,onChange:a=>e(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter todo title",required:!0,disabled:h})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,c.jsx)("textarea",{id:"description",value:f,onChange:a=>g(a.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter todo description (optional)",disabled:h})]}),(0,c.jsx)("button",{type:"submit",disabled:h||!b.trim(),className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Adding...":"Add Todo"})]})}function n({todo:a,onUpdate:b,onDelete:e}){let[f,g]=(0,d.useState)(!1),[h,i]=(0,d.useState)(a.title),[j,k]=(0,d.useState)(a.description||""),[m,n]=(0,d.useState)(!1),o=async c=>{await b(a.id,{status:c})},p=async()=>{confirm("Are you sure you want to delete this todo?")&&await e(a.id)},q=async()=>{if(!h.trim())return void alert("Title is required");n(!0);try{await b(a.id,{title:h.trim(),description:j.trim()||void 0}),g(!1)}catch(a){console.error("Failed to update todo:",a)}finally{n(!1)}};return(0,c.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-4",children:[f?(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),(0,c.jsx)("input",{type:"text",value:h,onChange:a=>i(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 text-gray-900",placeholder:"Enter title",disabled:m})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,c.jsx)("textarea",{value:j,onChange:a=>k(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 text-gray-900",placeholder:"Enter description (optional)",rows:3,disabled:m})]}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)("button",{onClick:q,disabled:m,className:"px-4 py-2 text-sm bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:m?"Saving...":"Save"}),(0,c.jsx)("button",{onClick:()=>{i(a.title),k(a.description||""),g(!1)},disabled:m,className:"px-4 py-2 text-sm bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 disabled:opacity-50",children:"Cancel"})]})]}):(0,c.jsx)("div",{className:"flex items-start justify-between",children:(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a.title}),(0,c.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${(a=>{switch(a){case l.PENDING:return"bg-yellow-100 text-yellow-800";case l.IN_PROGRESS:return"bg-blue-100 text-blue-800";case l.DONE:return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(a.status)}`,children:a.status})]}),a.description&&(0,c.jsx)("p",{className:"text-gray-600 mb-3",children:a.description}),(0,c.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,c.jsx)("button",{onClick:()=>{i(a.title),k(a.description||""),g(!0)},className:"px-3 py-1 text-sm bg-indigo-100 text-indigo-800 rounded-md hover:bg-indigo-200",children:"Edit"}),a.status!==l.PENDING&&(0,c.jsx)("button",{onClick:()=>o(l.PENDING),className:"px-3 py-1 text-sm bg-yellow-100 text-yellow-800 rounded-md hover:bg-yellow-200",children:"Mark Pending"}),a.status!==l.IN_PROGRESS&&(0,c.jsx)("button",{onClick:()=>o(l.IN_PROGRESS),className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-md hover:bg-blue-200",children:"Mark In Progress"}),a.status!==l.DONE&&(0,c.jsx)("button",{onClick:()=>o(l.DONE),className:"px-3 py-1 text-sm bg-green-100 text-green-800 rounded-md hover:bg-green-200",children:"Mark Done"}),(0,c.jsx)("button",{onClick:p,className:"px-3 py-1 text-sm bg-red-100 text-red-800 rounded-md hover:bg-red-200",children:"Delete"})]})]})}),(0,c.jsxs)("div",{className:"mt-2 text-xs text-gray-500 flex gap-4",children:[(0,c.jsxs)("span",{children:["Created: ",new Date(a.createdAt).toLocaleDateString()]}),a.updatedAt&&new Date(a.updatedAt).getTime()!==new Date(a.createdAt).getTime()&&(0,c.jsxs)("span",{children:["Updated: ",new Date(a.updatedAt).toLocaleDateString()]})]})]})}function o({todos:a,onUpdate:b,onDelete:d,isLoading:e}){return e?(0,c.jsx)("div",{className:"text-center py-8",children:(0,c.jsx)("p",{className:"text-gray-500",children:"Loading todos..."})}):0===a.length?(0,c.jsx)("div",{className:"text-center py-8",children:(0,c.jsx)("p",{className:"text-gray-500",children:"No todos found. Create your first todo!"})}):(0,c.jsx)("div",{children:a.map(a=>(0,c.jsx)(n,{todo:a,onUpdate:b,onDelete:d},a.id))})}function p(){let{isAuthenticated:a,isLoading:b,logout:g}=(0,f.useAuth)(),n=(0,e.useRouter)(),[p,q]=(0,d.useState)([]),[r,s]=(0,d.useState)(!0),[t,u]=(0,d.useState)("ALL"),[v,w]=(0,d.useState)("");(0,d.useEffect)(()=>{b||a||n.push("/login")},[a,b,n]),(0,d.useEffect)(()=>{a&&x()},[a,t]);let x=async()=>{try{s(!0);let a=await h("ALL"===t?void 0:t);q(a),w("")}catch(a){w("Failed to load todos. Please try again."),console.error("Error loading todos:",a)}finally{s(!1)}},y=async a=>{try{let b=await i(a);q([b,...p]),w("")}catch(a){throw w("Failed to create todo. Please try again."),console.error("Error creating todo:",a),a}},z=async(a,b)=>{try{let c=await j(a,b);q(p.map(b=>b.id===a?c:b)),w("")}catch(a){throw w("Failed to update todo. Please try again."),console.error("Error updating todo:",a),a}},A=async a=>{try{await k(a),q(p.filter(b=>b.id!==a)),w("")}catch(a){throw w("Failed to delete todo. Please try again."),console.error("Error deleting todo:",a),a}};return b||!a?(0,c.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,c.jsx)("p",{className:"text-gray-500",children:"Loading..."})}):(0,c.jsx)("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:(0,c.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,c.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Todos"}),(0,c.jsx)("button",{onClick:()=>{g(),n.push("/login")},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Logout"})]}),v&&(0,c.jsx)("div",{className:"mb-4 rounded-md bg-red-50 p-4",children:(0,c.jsx)("p",{className:"text-sm text-red-800",children:v})}),(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Status"}),(0,c.jsxs)("select",{id:"status-filter",value:t,onChange:a=>u(a.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,c.jsx)("option",{value:"ALL",children:"All"}),(0,c.jsx)("option",{value:l.PENDING,children:"Pending"}),(0,c.jsx)("option",{value:l.IN_PROGRESS,children:"In Progress"}),(0,c.jsx)("option",{value:l.DONE,children:"Done"})]})]}),(0,c.jsx)(m,{onSubmit:y}),(0,c.jsx)(o,{todos:p,onUpdate:z,onDelete:A,isLoading:r})]})})}a.s(["default",()=>p],60350)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__91e60e5a._.js.map