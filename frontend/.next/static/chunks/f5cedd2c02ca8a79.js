(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},31713,e=>{"use strict";var t,s=e.i(43476),a=e.i(71645),r=e.i(18566),i=e.i(83642),o=e.i(15760);let d=async e=>(await o.apiClient.get("/todos",{params:e?{status:e}:{}})).data,l=async e=>(await o.apiClient.post("/todos",e)).data,n=async(e,t)=>(await o.apiClient.put(`/todos/${e}`,t)).data,c=async e=>{await o.apiClient.delete(`/todos/${e}`)};var u=((t={}).PENDING="PENDING",t.IN_PROGRESS="IN_PROGRESS",t.DONE="DONE",t);function x({onSubmit:e}){let[t,r]=(0,a.useState)(""),[i,o]=(0,a.useState)(""),[d,l]=(0,a.useState)(!1),n=async s=>{if(s.preventDefault(),t.trim()){l(!0);try{await e({title:t.trim(),description:i.trim()||void 0}),r(""),o("")}catch(e){console.error("Error creating todo:",e)}finally{l(!1)}}};return(0,s.jsxs)("form",{onSubmit:n,className:"bg-white p-4 rounded-lg shadow-md mb-6",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),(0,s.jsx)("input",{type:"text",id:"title",value:t,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter todo title",required:!0,disabled:d})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,s.jsx)("textarea",{id:"description",value:i,onChange:e=>o(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter todo description (optional)",disabled:d})]}),(0,s.jsx)("button",{type:"submit",disabled:d||!t.trim(),className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Adding...":"Add Todo"})]})}function m({todo:e,onUpdate:t,onDelete:r}){let[i,o]=(0,a.useState)(!1),[d,l]=(0,a.useState)(e.title),[n,c]=(0,a.useState)(e.description||""),[x,m]=(0,a.useState)(!1),g=async s=>{await t(e.id,{status:s})},p=async()=>{confirm("Are you sure you want to delete this todo?")&&await r(e.id)},h=async()=>{if(!d.trim())return void alert("Title is required");m(!0);try{await t(e.id,{title:d.trim(),description:n.trim()||void 0}),o(!1)}catch(e){console.error("Failed to update todo:",e)}finally{m(!1)}};return(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-4",children:[i?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),(0,s.jsx)("input",{type:"text",value:d,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 text-gray-900",placeholder:"Enter title",disabled:x})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,s.jsx)("textarea",{value:n,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 text-gray-900",placeholder:"Enter description (optional)",rows:3,disabled:x})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:h,disabled:x,className:"px-4 py-2 text-sm bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:x?"Saving...":"Save"}),(0,s.jsx)("button",{onClick:()=>{l(e.title),c(e.description||""),o(!1)},disabled:x,className:"px-4 py-2 text-sm bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 disabled:opacity-50",children:"Cancel"})]})]}):(0,s.jsx)("div",{className:"flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,s.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${(e=>{switch(e){case u.PENDING:return"bg-yellow-100 text-yellow-800";case u.IN_PROGRESS:return"bg-blue-100 text-blue-800";case u.DONE:return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(e.status)}`,children:e.status})]}),e.description&&(0,s.jsx)("p",{className:"text-gray-600 mb-3",children:e.description}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)("button",{onClick:()=>{l(e.title),c(e.description||""),o(!0)},className:"px-3 py-1 text-sm bg-indigo-100 text-indigo-800 rounded-md hover:bg-indigo-200",children:"Edit"}),e.status!==u.PENDING&&(0,s.jsx)("button",{onClick:()=>g(u.PENDING),className:"px-3 py-1 text-sm bg-yellow-100 text-yellow-800 rounded-md hover:bg-yellow-200",children:"Mark Pending"}),e.status!==u.IN_PROGRESS&&(0,s.jsx)("button",{onClick:()=>g(u.IN_PROGRESS),className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-md hover:bg-blue-200",children:"Mark In Progress"}),e.status!==u.DONE&&(0,s.jsx)("button",{onClick:()=>g(u.DONE),className:"px-3 py-1 text-sm bg-green-100 text-green-800 rounded-md hover:bg-green-200",children:"Mark Done"}),(0,s.jsx)("button",{onClick:p,className:"px-3 py-1 text-sm bg-red-100 text-red-800 rounded-md hover:bg-red-200",children:"Delete"})]})]})}),(0,s.jsxs)("div",{className:"mt-2 text-xs text-gray-500 flex gap-4",children:[(0,s.jsxs)("span",{children:["Created: ",new Date(e.createdAt).toLocaleDateString()]}),e.updatedAt&&new Date(e.updatedAt).getTime()!==new Date(e.createdAt).getTime()&&(0,s.jsxs)("span",{children:["Updated: ",new Date(e.updatedAt).toLocaleDateString()]})]})]})}function g({todos:e,onUpdate:t,onDelete:a,isLoading:r}){return r?(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Loading todos..."})}):0===e.length?(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-gray-500",children:"No todos found. Create your first todo!"})}):(0,s.jsx)("div",{children:e.map(e=>(0,s.jsx)(m,{todo:e,onUpdate:t,onDelete:a},e.id))})}function p(){let{isAuthenticated:e,isLoading:t,logout:o}=(0,i.useAuth)(),m=(0,r.useRouter)(),[p,h]=(0,a.useState)([]),[b,y]=(0,a.useState)(!0),[f,N]=(0,a.useState)("ALL"),[j,v]=(0,a.useState)("");(0,a.useEffect)(()=>{t||e||m.push("/login")},[e,t,m]),(0,a.useEffect)(()=>{e&&w()},[e,f]);let w=async()=>{try{y(!0);let e=await d("ALL"===f?void 0:f);h(e),v("")}catch(e){v("Failed to load todos. Please try again."),console.error("Error loading todos:",e)}finally{y(!1)}},S=async e=>{try{let t=await l(e);h([t,...p]),v("")}catch(e){throw v("Failed to create todo. Please try again."),console.error("Error creating todo:",e),e}},E=async(e,t)=>{try{let s=await n(e,t);h(p.map(t=>t.id===e?s:t)),v("")}catch(e){throw v("Failed to update todo. Please try again."),console.error("Error updating todo:",e),e}},D=async e=>{try{await c(e),h(p.filter(t=>t.id!==e)),v("")}catch(e){throw v("Failed to delete todo. Please try again."),console.error("Error deleting todo:",e),e}};return t||!e?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Loading..."})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Todos"}),(0,s.jsx)("button",{onClick:()=>{o(),m.push("/login")},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Logout"})]}),j&&(0,s.jsx)("div",{className:"mb-4 rounded-md bg-red-50 p-4",children:(0,s.jsx)("p",{className:"text-sm text-red-800",children:j})}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Status"}),(0,s.jsxs)("select",{id:"status-filter",value:f,onChange:e=>N(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,s.jsx)("option",{value:"ALL",children:"All"}),(0,s.jsx)("option",{value:u.PENDING,children:"Pending"}),(0,s.jsx)("option",{value:u.IN_PROGRESS,children:"In Progress"}),(0,s.jsx)("option",{value:u.DONE,children:"Done"})]})]}),(0,s.jsx)(x,{onSubmit:S}),(0,s.jsx)(g,{todos:p,onUpdate:E,onDelete:D,isLoading:b})]})})}e.s(["default",()=>p],31713)}]);